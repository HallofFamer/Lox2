namespace test.types
using clox.std.util.UUID

trait TBox<T> { 
    
    T getContent() {
        throw NotImplementedException("Not implemented, subclass responsibility")
    }

    void setContent(T content) {
        throw NotImplementedException("Not implemented, subclass responsibility")
    }
}

class Box<T> with TBox<T>{

    var T content

    __init__(T content) {
        this.content = content
    }

    T getContent() {
        return this.content
    }

    void setContent(T content) {
        this.content = content
    }

    String toString() {
        //return "Box<${T}>(${this.content})"
        return "Box(${this.content})"
    }
}

T identity<T>(T arg) {
    return arg
}

class KeyedBox<S, T> extends Box<T> { 

    val S key

    __init__(S key, T content) {
        this.key = key
        this.content = content
    }

    K getKey() {
        return this.key
    }
}

Box<String> createBox() {
    return Box<String>("Hello, World!")
}

println("Creating generic class Box: ")
println(Box)

val box = Box<Int>(42)
println("Instantiating from generic class Box: ${box}")
box.setContent(100)
//box.setContent("Hello World")
println("Box new content: ${box.getContent()}")

println("Creating generic trait TBox: ")
println(TBox)
println(KeyedBox)

val id = identity<UUID>(UUID())
println(id.toString())
//throw Exception(id)